锁是协调多个程序并发访问某一资源的机制
为实现事务的隔离性，每个事务进行操作时都会对数据加上锁，防止其他事务同时操作数据
innoDB 中锁是基于索引实现的，当 SQL 命中索引时，锁住的就是对应的索引节点，没有命中索引锁住的就是整个表
锁的分类：
基于属性：共享锁（share lock）和排他锁（exclusive lock），又称读锁和写锁
当一个数据被加上S锁后，其他事务只能加读锁，直到该数据上所有的读锁都被释放
当一个数据被加上X锁后，其他事务无法再加任何锁，直到写锁被释放
按粒度分类：行锁、表锁、间隙锁等
    表锁锁定一整张表，粒度大、加锁简单、不会死锁、容易冲突、并发度低
    行锁锁定表中的某一行或多行记录，特点时是粒度小，加锁开销大，锁冲突概率低、并发度高，会死锁
    记录锁属于行锁，它只锁定一行记录
    间隙锁锁定的是相邻 id 间的空隙，防止出现幻读问题
死锁：
    两个或以上进程互相等待对方释放资源形成僵局
    产生死锁的根本原因在于对资源加锁的顺序不一致
    解决方法：
        资源要么全部分配要么不分配
        每个进程加锁按照规定顺序进行